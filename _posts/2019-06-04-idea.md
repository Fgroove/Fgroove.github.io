---
layout: post
title:   "research proposal"
date:   2019-06-04 13:55:01 +0800
categories: 杂记
tag: "research proposal"

---
* content
{:toc}


# 技术思路

基于动态分析的反沙箱对抗技术

## 07 污点+快照



## VMRay Rewind

* VMRay使用PT收集的信息判断程序的未执行代码区域
* 对未执行区域进行过滤(丢弃异常处理)
* 跟踪有趣条件分支
* 利用符号执行，求解触发分支的解
* 程序倒带回分支，注入求解进行另一个控制流的行为展开

---

- 利用PT信息来确定被监视进程的内存dumps中的代码覆盖，即识别在分析期间尚未执行的所有代码位置。
- 从这些未触发的代码位置，我们识别“有趣”函数的子集，例如，通过丢弃错误处理例程。
- 然后，我们追溯从这些“有趣的”未执行代码位置到依赖于环境设置的先前条件分支（例如，获得当前时间或键盘布局的函数）的执行流程。
- 然后应用符号执行来识别隐藏函数的路径（条件）。
- 在这些路径上，我们使用求解器生成具体值以触发它们的执行。
- 最后，我们重新分析示例并确保所有环境查询都会产生达到隐藏功能所需的值。

## summary

两种思路求解替代路径的分支条件都面临相同问题：如果外界输入作为恶意代码的解密秘钥，即使符号执行能跑机密代码路径，也无法解密正确解(不知道key)。这个问题的难度在解密payload本身。

