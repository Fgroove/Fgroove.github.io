layout: post
title:   "angr"
date:   2019-06-25 10:55:01 +0800
categories: "恶意代码分析实战"
tag: "隐蔽的恶意代码启动"

* content
{:toc}


# angr

## Installation

安装python虚拟环境，使用`apt`包安装找不到`/usr/local/bin/virtualenvwrapper.sh`,使用`pip`安装

```shell
sudo pip install virtualenvwrapper
```

打开`~/.bashrc`，添加

```shell
source /usr/local/bin/virtualenvwrapper.sh
export ~/virtualenv # 存放虚拟环境的地方
```

创建虚拟环境，安装angr

```shell
mkvirtualenv angr
sudo pip install angr
```



## loading

angr的二进制装载组件是CLE，CLE现在有对于ELF、PE、CGC和ELF核心转储文件的后端支持。也可以手动配置`custom_arch`来启动IDA来解析文件。

使用angr装载二进制文件`"/bin/true"`

```shell
>>> import angr
>>> b = angr.Project("/bin/true")
```

`b`就是主二进制文件以及它依赖的所有库的代表。

```shell
# 二进制文件的入口点
>>> print b.entry

# 这些是二进制文件内存空间中的最大值和最小值
>>> print b.loader.min_addr(), b.loader.max_addr()

# 这些是文件的全名
>>> print b.filename
```

