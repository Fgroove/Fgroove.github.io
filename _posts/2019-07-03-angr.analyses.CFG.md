---
layout: post
title:   "angr.analyses.CFG"
date:   2019-07-03 13:55:01 +0800
categories: "research proposal"
tag: "tools"


---

[TOC]

# angr.analyses.CFG

angr包括分析以恢复二进制程序的控制流图。 

## 基本思想

二进制文件的一个基本分析就是控制流图。控制流图以基本块为节点，jumps/calls/rets/etc为边。

angr可以生成两种CFG：静态CFGFast，动态CFGEmulated。

* CFGFast使用静态分析来生成CFG。 它更快，但理论上受到一些控制流转换只能在执行时解决的限制。 这与其他流行的逆向工程工具执行的CFG分析相同，其结果与其输出相当。
* CFGEmulated使用符号执行来捕获CFG。 虽然它在理论上更准确，但速度要慢得多。 由于仿真的准确性（系统调用，缺少硬件功能等）的问题，它通常也不太完整。

建立控制流图

```python
>>> import angr
# load your project
>>> p = angr.Project('/bin/true', load_options={'auto_load_libs': False})

# Generate a static CFG
>>> cfg = p.analyses.CFGFast()

# generate a dynamic CFG
>>> cfg = p.analyses.CFGEmulated(keep_state=True)
```

